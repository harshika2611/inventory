<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
    <script src="/js/bootstrap.js"></script>
    <link rel="stylesheet" href="src/css/dashboard/allpage.css" />
    <style>
      .wid-50 {
        width: 140px;
      }
    </style>
  </head>
  <body style="background-color: #eeeeee" onload="fetchData()">
    <%- include("../components/navigation")%>
    <div class="div-second">
      <div class="d-flex justify-content-center">
        <section class="card m-3 p-3" style="width: 30rem">
          <span class="fs-2">Overview</span>
          <div class="d-flex justify-content-center">
            <div class="mx-3 wid-50">
              <span>₹20,000$</span>
              <p>Total Profit</p>
            </div>
            <div class="mx-3 wid-50">
              <span>₹2,000$</span>
              <p>Revanue</p>
            </div>
            <div class="mx-3 wid-50">
              <span>₹5,000</span>
              <p>Seles</p>
            </div>
          </div>
          <div class="d-flex m-2 fs-5">
            <div class="mx-2">
              <span>₹1,25,000</span>
              <p class="fs-6">Net purchase value</p>
            </div>
            <div class="mx-2">
              <span>₹1,25,000</span>
              <p class="fs-6">Net Seles value</p>
            </div>
            <div class="mx-2">
              <span>₹1,25,000</span>
              <p class="fs-6">Mom Profit</p>
            </div>
            <div class="mx-2">
              <span>₹1,25,000</span>
              <p class="fs-6">Yoy Profit</p>
            </div>
          </div>
        </section>
        <section class="card m-3 p-3" style="width: 30rem">
          <div>
            <span class="fs-2">Best selling category</span>
            <span class="float-end m-3">See All</span>
          </div>
          <div>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Category</th>
                  <th scope="col">Turn Over</th>
                  <th scope="col">Increase By</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">Vegetable</th>
                  <td>₹26,000</td>
                  <td>8.2%</td>
                </tr>
                <tr>
                  <th scope="row">Instant Food</th>
                  <td>₹22,000</td>
                  <td>5.5%</td>
                </tr>
                <tr>
                  <th scope="row">Households</th>
                  <td>₹21,000</td>
                  <td>3.2%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </div>

      <section class="d-flex justify-content-center">
        <div class="card mx-5 mb-2 p-3" style="width: 67rem">
          <div>
            <span class="fs-2">Best selling Product</span>
            <span class="float-end m-3">See All</span>
          </div>
          <div>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Order</th>
                  <th scope="col">Name</th>
                  <th scope="col">Amount</th>
                  <th scope="col">Shipping Address</th>
                  <th scope="col">Payment Status</th>
                </tr>
              </thead>
              <tbody id="alldata"></tbody>
            </table>
          </div>
        </div>
      </section>
    </div>
    <script>
      let alldatatable = document.getElementById("alldata");
      fetchData = async () => {
        let api = await fetch("api/salesreport/allreport");
        let { rows, header } = await api.json();
        let letestdata = [];
        let count = 0;
        for (let e of rows) {
          console.log(e);
          if (count == 5) {
            break;
          }
          letestdata.push(e);
          count++;
        }
        console.log(letestdata);
        alldatatable.innerHTML = letestdata
          .map(
            (e) =>
              `<tr>
            <td>${e.order_name}</td>
            <td>${e.firstname}</td>
            <td>${e.amount}</td>
            <td>${e.shipping_address}</td>
            <td>${e.payment_status}</td>
            </tr>`
          )
          .join("");
      };
    </script>
  </body>
</html>
